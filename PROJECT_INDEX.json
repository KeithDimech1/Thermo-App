{"at":"2025-11-16T16:21:38.455865","root":".","tree":[".","\u251c\u2500\u2500 app/ (8 files)","\u2502   \u251c\u2500\u2500 api/ (3 files)","\u2502   \u2502   \u251c\u2500\u2500 samples/ (2 files)","\u2502   \u2502   \u2502   \u2514\u2500\u2500 [id]/ (1 files)","\u2502   \u2502   \u2514\u2500\u2500 stats/ (1 files)","\u2502   \u2514\u2500\u2500 samples/ (2 files)","\u2502       \u2514\u2500\u2500 [id]/ (1 files)","\u251c\u2500\u2500 build-data/ (3 files)","\u2502   \u251c\u2500\u2500 archive/","\u2502   \u2502   \u2514\u2500\u2500 README.md","\u2502   \u251c\u2500\u2500 assets/ (3 files)","\u2502   \u2502   \u251c\u2500\u2500 schemas/","\u2502   \u2502   \u251c\u2500\u2500 source-data/ (3 files)","\u2502   \u2502   \u2502   \u2514\u2500\u2500 thermo/ (3 files)","\u2502   \u2502   \u2502       \u251c\u2500\u2500 data-extracts/ (3 files)","\u2502   \u2502   \u2502       \u2502   \u251c\u2500\u2500 earthbankschema/","\u2502   \u2502   \u2502       \u2502   \u2514\u2500\u2500 transformed-fair/ (3 files)","\u2502   \u2502   \u2502       \u2514\u2500\u2500 table-data/","\u2502   \u2502   \u2514\u2500\u2500 README.md"],"stats":{"total_files":35,"total_directories":23,"fully_parsed":{"typescript":15,"python":3},"listed_only":{"json":5,"css":1,"sql":10,"shell":1},"markdown_files":3},"f":{"app/api/samples/[id]/route.ts":["t",["GET:17:async (_request:NextRequest, { params }:{ params:{ id:string } })::"]],"app/api/samples/route.ts":["t",["GET:26:async (request:NextRequest)::"]],"app/api/stats/route.ts":["t",["GET:17:async (request:NextRequest)::"]],"app/layout.tsx":["t",["RootLayout:70:({ children, }:Readonly<{ children:React.ReactNode; }>)::"]],"app/page.tsx":["t",["HomePage:6:async ()::"]],"app/samples/[id]/page.tsx":["t",["SampleDetailPage:7:async ({ params, }:{ params:{ id:string }; })::"]],"app/samples/page.tsx":["t",["SamplesPage:6:async ()::"]],"lib/db/connection.ts":["t",["getPool:24:():Pool::","query:82:async (text:string, params?:any[]):Promise<T[]>:getPool,query:","queryOne:118:async (text:string, params?:any[]):Promise<T | null>::","transaction:142:async (callback:(client:PoolClient):getPool,query:","testConnection:168:async ():Promise<boolean>::","closePool:187:async ():Promise<void>::","getPoolStats:199:()::"]],"lib/db/queries.ts":["t",["getAllSamples:34:async (filters?:SampleFilters, limit:number = 50, offset:number = 0, sortBy:'sample_id' | 'elevation_m' | 'mineral_type' = 'sample_id', sortOrder:'asc' | 'desc' = 'asc'):Promise<PaginatedResponse<Sample>>::","getSampleSummaries:106:async (filters?:SampleFilters, limit:number = 50, offset:number = 0):Promise<PaginatedResponse<SampleSummary>>::","getSampleById:148:async (sampleId:string):Promise<Sample | null>::","getSampleDetail:158:async (sampleId:string):Promise<SampleDetailResponse | null>:getSampleById:","getAFTData:185:async (filters?:FTDataFilters, limit:number = 50, offset:number = 0):Promise<PaginatedResponse<AFTComplete>>::","getFTAgesBySample:252:async (sampleId:string):Promise<FTAges | null>::","getFTLengthsBySample:262:async (sampleId:string):Promise<FTTrackLengths | null>::","getFTCountsBySample:272:async (sampleId:string):Promise<FTCounts | null>::","getAHeData:286:async (filters?:AHeDataFilters, limit:number = 100, offset:number = 0):Promise<PaginatedResponse<AHeGrainData>>::","getAHeGrainsBySample:343:async (sampleId:string):Promise<AHeGrainData[]>::","getDatasetStats:357:async (datasetId:number = 1):Promise<DatasetStatsResponse>::","searchSamplesByLocation:407:async (minLat:number, maxLat:number, minLon:number, maxLon:number):Promise<Sample[]>::"]],"lib/utils/cn.ts":["t",["cn:10:(...classes:ClassValue[]):string::"]],"s/break-papers-into-sections.py":["p",["extract_sections:12:(content:str, paper_name:str)>List[Tuple[str, str, str]]::","create_index_file:67:(sections:List[Tuple[str, str, str]], paper_title:str)>str::Create an index/README file for the paper sections.","process_paper:83:(paper_path:str, output_base:str, paper_short_name:str, paper_title:str):create_index_file,extract_sections:Process a single paper and break it into sections.","main:118:():process_paper:"]],"s/break-terminology-docs.py":["p",["extract_metadata_and_toc:12:(lines:List[str])>Tuple[List[str], int]::","extract_sections:38:(content:str, doc_name:str)>List[Tuple[str, str, str]]:extract_metadata_and_toc:","create_index_file:98:(sections:List[Tuple[str, str, str]], doc_title:str, original_path:str)>str::Create an index/README file for the document sections.","process_document:124:(doc_path:str, output_base:str, folder_name:str, doc_title:str):create_index_file,extract_sections:Process a single document and break it into sections.","main:159:():process_document:"]],"s/db/import-thermo-data.ts":["t",["log:52:(message:string, type:'info' | 'success' | 'error' | 'warn' = 'info'):log:","parseCSV:73:(content:string):Record<string, string>[]:parseLine:","parseLine:77:(line:string):string[]::","toSQLValue:117:(value:string | null):any::","importSamples:131:async (client:PoolClient):log,parseCSV,toSQLValue:","importFTCounts:199:async (client:PoolClient):log,parseCSV,toSQLValue:","importFTTrackLengths:283:async (client:PoolClient):log,parseCSV,toSQLValue:","importFTAges:332:async (client:PoolClient):log,parseArray,parseCSV,toSQLValue:","importAHeGrainData:401:async (client:PoolClient):log,parseCSV,toSQLValue:","main:458:async ():importAHeGrainData,importFTAges,importFTCounts,importFTTrackLengths,importSamples,log:","parseArray:342:(val:string | null):string | null::"]],"s/db/reset-database.ts":["t",["askQuestion:42:(query:string):Promise<string>::","resetDatabase:58:async ():askQuestion:"]],"s/db/test-connection.ts":["t",["testConnection:38:async ()::"]]},"g":[["main","importAHeGrainData"],["log","log"],["transaction","query"],["process_paper","create_index_file"],["resetDatabase","askQuestion"],["importAHeGrainData","parseCSV"],["main","log"],["importFTAges","parseCSV"],["importFTAges","log"],["importAHeGrainData","log"],["importAHeGrainData","toSQLValue"],["main","importFTAges"],["main","process_document"],["importFTAges","toSQLValue"],["main","importSamples"],["query","getPool"],["extract_sections","extract_metadata_and_toc"],["process_document","extract_sections"],["getSampleDetail","getSampleById"],["transaction","getPool"],["importSamples","parseCSV"],["importSamples","log"],["importSamples","toSQLValue"],["importFTCounts","parseCSV"],["importFTTrackLengths","parseCSV"],["process_paper","extract_sections"],["importFTAges","parseArray"],["importFTCounts","log"],["importFTTrackLengths","log"],["importFTCounts","toSQLValue"],["process_document","create_index_file"],["importFTTrackLengths","toSQLValue"],["main","importFTTrackLengths"],["main","process_paper"],["query","query"],["parseCSV","parseLine"],["main","importFTCounts"]],"d":{"readme/CHANGES.md":["Documentation Changes","2025-11-16 16:11 (BigTidy: Schema Migration Detection)","\ud83d\udea8 CRITICAL FINDING: Complete Database Schema Migration","\ud83d\udcc1 Project Structure Cleanup","\ud83d\uddc4\ufe0f Database Schema Status","\ud83d\udcca Code Analysis","\ud83d\udcda Documentation Impact","\ud83d\udce6 PROJECT_INDEX Updated","\u2705 Safe Zones Verified","\ud83c\udfaf Summary"],"readme/INDEX.md":["QC-Results Code Documentation","\ud83d\udcd6 Quick Start","\ud83d\uddc2\ufe0f Documentation by Category","\ud83d\uddc4\ufe0f Database Documentation","\u2699\ufe0f Database Layer (2 files)","\ud83d\udcca Documentation Statistics","\ud83c\udfaf Documentation Structure"],"readme/database/SCHEMA_CHANGES.md":["Database Schema Changes","2025-11-11 (Initial Schema Documentation)","\u2705 Initial Schema Baseline Created","2025-11-12 18:03 (Schema Verification)","\u2705 No Schema Changes Detected","\ud83d\udea8 2025-11-16 (MAJOR SCHEMA MIGRATION)","\u274c Complete Database Replacement Detected"]},"deps":{"app/api/samples/[id]/route.ts":["next/server","@/lib/db/queries"],"app/api/samples/route.ts":["next/server","@/lib/db/queries","@/lib/types/thermo-data"],"app/api/stats/route.ts":["next/server","@/lib/db/queries"],"app/layout.tsx":["next/font/google"],"app/page.tsx":["next/link","@/lib/db/queries"],"app/samples/[id]/page.tsx":["next/link","@/lib/db/queries","next/navigation"],"app/samples/page.tsx":["next/link","@/lib/db/queries"],"lib/db/connection.ts":["pg"],"lib/db/queries.ts":["lib/db/connection.ts","@/lib/types/thermo-data"],"scripts/break-papers-into-sections.py":["os","re","pathlib","typing"],"scripts/break-terminology-docs.py":["os","re","pathlib","typing"],"scripts/db/import-thermo-data.ts":["dotenv","path","pg","fs","path"],"scripts/db/reset-database.ts":["pg","fs","path","readline"],"scripts/db/test-connection.ts":["dotenv","path","pg"]},"dir_purposes":{"app/api/samples/[id]":"API routes and endpoints","app/api/samples":"API routes and endpoints","app/api/stats":"API routes and endpoints","lib/utils":"Shared utility functions and helpers","scripts":"Build and utility scripts","scripts/db":"Test files and test utilities","scripts/db/migrations":"Database migration files","scripts/migrations":"Database migration files"},"staleness":1762665698.549713}