-- Database Schema Snapshot
-- Generated: 2025-11-21 05:24:45
-- Database: neondb
-- Generated by: /bigtidy living documentation system

CREATE TABLE public.ahe_grain_data (
    id integer NOT NULL,
    sample_id character varying(50) NOT NULL,
    lab_no character varying(50),
    length_um numeric,
    half_width_um numeric,
    rs_um numeric,
    mass_mg numeric,
    terminations character varying(10),
    u_ppm numeric,
    th_ppm numeric,
    sm_ppm numeric,
    eu_ppm numeric,
    he_ncc numeric,
    uncorr_age_ma numeric,
    corr_age_ma numeric,
    corr_age_1sigma_ma numeric,
    ft numeric,
    std_run character varying(10),
    thermal_model character varying(10),
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE public.batches (
    id integer NOT NULL,
    batch_name character varying(200) NOT NULL,
    analysis_date date,
    laboratory character varying(200),
    analytical_session character varying(200),
    irradiation_id character varying(100),
    irradiation_reactor character varying(100),
    thermal_neutron_dose numeric,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE public.data_files (
    id integer NOT NULL,
    dataset_id integer NOT NULL,
    file_name character varying(200) NOT NULL,
    file_path character varying(500) NOT NULL,
    file_type character varying(50) NOT NULL,
    display_name character varying(200),
    file_size_bytes integer,
    row_count integer,
    description text,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    is_folder boolean DEFAULT false,
    folder_path character varying(500),
    upload_status character varying(20) DEFAULT 'available'::character varying,
    category character varying(100),
    source_url text,
    upload_notes text
);

CREATE TABLE public.datapoint_people_roles (
    id integer NOT NULL,
    datapoint_id integer NOT NULL,
    datapoint_type character varying(20) NOT NULL,
    person_id integer NOT NULL,
    role character varying(50) NOT NULL,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE public.dataset_people_roles (
    id integer NOT NULL,
    dataset_id integer NOT NULL,
    person_id integer NOT NULL,
    role character varying(50) NOT NULL,
    author_order integer,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE public.datasets (
    id integer NOT NULL,
    dataset_name character varying(200) NOT NULL,
    description text,
    publication_reference text,
    doi character varying(100),
    study_area character varying(200),
    analyst character varying(100),
    laboratory character varying(200),
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    full_citation text,
    publication_year integer,
    publication_journal character varying(200),
    publication_volume_pages character varying(100),
    study_location text,
    pdf_filename character varying(500),
    pdf_url text,
    mineral_analyzed character varying(100),
    sample_count integer,
    age_range_min_ma numeric,
    age_range_max_ma numeric,
    authors ARRAY,
    collection_date date,
    analysis_methods ARRAY,
    supplementary_files_url text
);

CREATE TABLE public.earthbank_ftDatapoints (
    id uuid NOT NULL DEFAULT uuid_generate_v4(),
    datapointName character varying(255) NOT NULL,
    sampleID character varying(255) NOT NULL,
    laboratory character varying(255),
    analyst character varying(255),
    analysisDate timestamp without time zone,
    labNumber character varying(100),
    ftMethod character varying(100),
    mineralType character varying(100),
    nGrains integer,
    totalNs integer,
    rhoS numeric,
    uPpm numeric,
    uPpmStdDev numeric,
    uConcentration numeric,
    dPar numeric,
    dParUncertainty numeric,
    pChi2 numeric,
    dispersion numeric,
    pooledAgeMa numeric,
    pooledAgeUncertainty numeric,
    centralAgeMa numeric,
    centralAgeUncertainty numeric,
    mtl numeric,
    mtlUncertainty numeric,
    stdDevMu numeric,
    nTracks integer,
    sigmaP numeric,
    sigmaPError numeric,
    zeta numeric,
    zetaUncertainty numeric,
    createdAt timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updatedAt timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE public.earthbank_ftTrackLengthData (
    id uuid NOT NULL DEFAULT uuid_generate_v4(),
    datapointName character varying(255) NOT NULL,
    sampleID character varying(255),
    grainName character varying(100),
    trackID character varying(100),
    trackType character varying(100),
    lengthUm numeric,
    cAxisAngleDeg numeric,
    dPar numeric,
    createdAt timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE public.earthbank_heDatapoints (
    id uuid NOT NULL DEFAULT uuid_generate_v4(),
    datapointName character varying(255) NOT NULL,
    sampleID character varying(255) NOT NULL,
    ftMethod character varying(100),
    laboratory character varying(255),
    analyst character varying(255),
    analysisDate timestamp without time zone,
    nGrains integer,
    meanCorrectedAgeMa numeric,
    meanCorrectedAgeUncertainty numeric,
    meanUncorrectedAgeMa numeric,
    notes text,
    createdAt timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updatedAt timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE public.earthbank_heWholeGrainData (
    id uuid NOT NULL DEFAULT uuid_generate_v4(),
    datapointName character varying(255) NOT NULL,
    sampleID character varying(255),
    grainName character varying(100) NOT NULL,
    correctedHeAge numeric,
    correctedHeAgeUncertainty numeric,
    uncorrectedHeAge numeric,
    uncorrectedHeAgeUncertainty numeric,
    ft numeric,
    ftU238 numeric,
    ftU235 numeric,
    ftTh232 numeric,
    ftSm147 numeric,
    he4Concentration numeric,
    he4ConcentrationUncertainty numeric,
    heNmolG numeric,
    heNmolGUncertainty numeric,
    uConcentration numeric,
    uConcentrationUncertainty numeric,
    uNg numeric,
    uNgUncertainty numeric,
    thConcentration numeric,
    thConcentrationUncertainty numeric,
    thNg numeric,
    thNgUncertainty numeric,
    smConcentration numeric,
    smConcentrationUncertainty numeric,
    smNg numeric,
    smNgUncertainty numeric,
    eU numeric,
    eUUncertainty numeric,
    rsUm numeric,
    massMg numeric,
    geometry character varying(100),
    lengthUm numeric,
    widthUm numeric,
    numPits integer,
    createdAt timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE public.earthbank_samples (
    id uuid NOT NULL DEFAULT uuid_generate_v4(),
    sampleID character varying(255) NOT NULL,
    IGSN character varying(20),
    latitude numeric,
    longitude numeric,
    elevationM numeric,
    geodeticDatum character varying(50),
    verticalDatum character varying(50),
    mineral character varying(100),
    mineralType character varying(100),
    lithology character varying(100),
    sampleKind character varying(100),
    sampleAgeMa numeric,
    collector character varying(255),
    collectionDate date,
    collectionYear integer,
    datasetID character varying(100),
    nAFTGrains integer,
    nAHeGrains integer,
    quadrangle character varying(255),
    faultBlock character varying(100),
    igneousAgeMa numeric,
    igneousAgeErrorMa numeric,
    project character varying(255),
    country character varying(100),
    stateProvince character varying(100),
    locationDescription text,
    createdAt timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updatedAt timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE public.extraction_sessions (
    id uuid NOT NULL DEFAULT uuid_generate_v4(),
    session_id text NOT NULL,
    pdf_filename text NOT NULL,
    pdf_path text NOT NULL,
    pdf_size_bytes bigint NOT NULL,
    state text NOT NULL DEFAULT 'uploaded'::text,
    current_step integer DEFAULT 1,
    paper_metadata jsonb,
    tables_found integer,
    data_types ARRAY,
    csvs_extracted integer,
    extraction_quality_score integer,
    failed_tables ARRAY,
    dataset_id integer,
    fair_score integer,
    records_imported integer,
    user_id text,
    created_at timestamp with time zone DEFAULT now(),
    updated_at timestamp with time zone DEFAULT now(),
    completed_at timestamp with time zone,
    error_message text,
    error_stage text
);

CREATE TABLE public.fair_score_breakdown (
    id integer NOT NULL,
    dataset_id integer NOT NULL,
    table4_score integer,
    table4_reasoning text,
    table5_score integer,
    table5_reasoning text,
    table6_score integer,
    table6_reasoning text,
    table10_score integer,
    table10_reasoning text,
    findable_score integer,
    findable_reasoning text,
    accessible_score integer,
    accessible_reasoning text,
    interoperable_score integer,
    interoperable_reasoning text,
    reusable_score integer,
    reusable_reasoning text,
    total_score integer,
    grade character varying(2),
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE public.ft_binned_length_data (
    id integer NOT NULL,
    ft_datapoint_id integer NOT NULL,
    mount_id character varying(50),
    etch_duration_seconds integer,
    bin_0_1_um integer,
    bin_1_2_um integer,
    bin_2_3_um integer,
    bin_3_4_um integer,
    bin_4_5_um integer,
    bin_5_6_um integer,
    bin_6_7_um integer,
    bin_7_8_um integer,
    bin_8_9_um integer,
    bin_9_10_um integer,
    bin_10_11_um integer,
    bin_11_12_um integer,
    bin_12_13_um integer,
    bin_13_14_um integer,
    bin_14_15_um integer,
    bin_15_16_um integer,
    bin_16_17_um integer,
    bin_17_18_um integer,
    bin_18_19_um integer,
    bin_19_20_um integer,
    dpar_um numeric,
    dpar_error_um numeric,
    n_dpar_measurements integer,
    dper_um numeric,
    dper_error_um numeric,
    n_dper_measurements integer,
    dpar_dper_error_type character varying(20),
    comments text,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE public.ft_count_data (
    id integer NOT NULL,
    ft_datapoint_id integer NOT NULL,
    grain_id character varying(100) NOT NULL,
    counting_area_cm2 numeric,
    ns integer,
    rho_s_cm2 numeric,
    ni integer,
    rho_i_cm2 numeric,
    nd integer,
    rho_d_cm2 numeric,
    dpar_um numeric,
    dpar_error_um numeric,
    n_dpar_measurements integer,
    dper_um numeric,
    dper_error_um numeric,
    n_dper_measurements integer,
    dpar_dper_error_type character varying(20),
    comments text,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE public.ft_datapoints (
    id integer NOT NULL,
    sample_id character varying(50) NOT NULL,
    datapoint_key character varying(100) NOT NULL,
    batch_id integer,
    laboratory character varying(200),
    analyst_orcid character varying(50),
    analysis_date timestamp without time zone,
    publication_doi character varying(100),
    mineral_type character varying(50),
    ft_method character varying(50),
    ft_software character varying(100),
    ft_algorithm character varying(50),
    u_determination_method character varying(100),
    n_grains integer,
    total_area_cm2 numeric,
    mean_rho_s numeric,
    total_ns integer,
    mean_rho_i numeric,
    total_ni integer,
    mean_rho_d numeric,
    total_nd integer,
    dosimeter character varying(50),
    mean_u_ppm numeric,
    sd_u_ppm numeric,
    mean_dpar_um numeric,
    se_dpar_um numeric,
    n_dpar_measurements integer,
    mean_dper_um numeric,
    se_dper_um numeric,
    n_dper_measurements integer,
    mean_rmr0 numeric,
    sd_rmr0 numeric,
    mean_kappa numeric,
    sd_kappa numeric,
    rmr0_equation character varying(100),
    chi_square numeric,
    p_chi2_pct numeric,
    dispersion_pct numeric,
    age_equation character varying(100),
    mean_age_ma numeric,
    mean_age_error_ma numeric,
    central_age_ma numeric,
    central_age_error_ma numeric,
    pooled_age_ma numeric,
    pooled_age_error_ma numeric,
    population_age_ma numeric,
    population_age_error_ma numeric,
    age_error_type character varying(20),
    age_comment text,
    mean_track_length_um numeric,
    se_mean_track_length_um numeric,
    n_track_measurements integer,
    sd_track_length_um numeric,
    cf252_irradiation boolean,
    etchant_chemical character varying(100),
    etch_duration_seconds integer,
    etch_temperature_c numeric,
    zeta_yr_cm2 numeric,
    zeta_error_yr_cm2 numeric,
    zeta_error_type character varying(20),
    r_um numeric,
    lambda_d character varying(30),
    lambda_f character varying(30),
    q_factor numeric,
    irradiation_reactor character varying(100),
    thermal_neutron_dose numeric,
    irradiation_batch_id character varying(100),
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE public.ft_single_grain_ages (
    id integer NOT NULL,
    ft_datapoint_id integer NOT NULL,
    grain_id character varying(100) NOT NULL,
    mount_id character varying(50),
    etch_duration_seconds integer,
    u_ppm numeric,
    u_ppm_error numeric,
    u_ca_ratio numeric,
    u_ca_ratio_error numeric,
    u_ca_error_type character varying(20),
    rmr0 numeric,
    kappa numeric,
    grain_age_ma numeric,
    grain_age_error_ma numeric,
    grain_age_error_type character varying(20),
    comments text,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE public.ft_track_length_data (
    id integer NOT NULL,
    ft_datapoint_id integer NOT NULL,
    grain_id character varying(100) NOT NULL,
    track_id character varying(100) NOT NULL,
    track_type character varying(20),
    mount_id character varying(50),
    etch_duration_seconds integer,
    apparent_length_um numeric,
    corrected_z_depth_um numeric,
    true_length_um numeric,
    azimuth_deg numeric,
    dip_deg numeric,
    angle_to_c_axis_deg numeric,
    c_axis_corrected_length_um numeric,
    dpar_um numeric,
    dpar_error_um numeric,
    n_dpar_measurements integer,
    dper_um numeric,
    dper_error_um numeric,
    n_dper_measurements integer,
    dpar_dper_error_type character varying(20),
    rmr0 numeric,
    kappa numeric,
    comments text,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE public.grains (
    id integer NOT NULL,
    grain_id character varying(100) NOT NULL,
    mount_id character varying(50),
    grain_identifier character varying(100),
    grain_morphology character varying(50),
    grain_quality character varying(50),
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE public.he_datapoints (
    id integer NOT NULL,
    sample_id character varying(50) NOT NULL,
    datapoint_key character varying(100) NOT NULL,
    batch_id integer,
    laboratory character varying(200),
    analyst_orcid character varying(50),
    analysis_date timestamp without time zone,
    publication_doi character varying(100),
    mineral_type character varying(50),
    mount_id character varying(50),
    n_aliquots integer,
    mean_uncorr_age_ma numeric,
    mean_uncorr_age_error_ma numeric,
    mean_uncorr_age_error_type character varying(20),
    weighted_mean_uncorr_age_ma numeric,
    weighted_mean_uncorr_age_error_ma numeric,
    weighted_mean_uncorr_age_error_type character varying(20),
    mswd_uncorr numeric,
    conf95_uncorr_ma numeric,
    chi2_uncorr_pct numeric,
    iqr_uncorr_ma numeric,
    mean_corr_age_ma numeric,
    mean_corr_age_error_ma numeric,
    mean_corr_age_error_type character varying(20),
    weighted_mean_corr_age_ma numeric,
    weighted_mean_corr_age_error_ma numeric,
    weighted_mean_corr_age_error_type character varying(20),
    mswd_corr numeric,
    conf95_corr_ma numeric,
    chi2_corr_pct numeric,
    iqr_corr_ma numeric,
    uncertainty_description text,
    ablation_pit_volume_method character varying(100),
    ablation_pit_volume_software character varying(100),
    he_measurement_method character varying(100),
    parent_isotope_method character varying(100),
    surface_area_volume_equation character varying(100),
    alpha_stopping_distance_ref character varying(200),
    ft_correction_equation character varying(100),
    esr_sa_v_equation character varying(100),
    esr_ft_equation character varying(100),
    eu_equation character varying(100),
    he_age_approach character varying(100),
    corr_age_method character varying(100),
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE public.he_whole_grain_data (
    id integer NOT NULL,
    he_datapoint_id integer NOT NULL,
    lab_no character varying(50),
    grain_identifier character varying(100),
    aliquot_type character varying(20),
    n_grains_in_aliquot integer,
    crystal_integrity character varying(20),
    grain_morphology character varying(50),
    assumed_geometry character varying(50),
    length_um numeric,
    length_um_sd numeric,
    half_width_um numeric,
    width_um_sd numeric,
    height_um numeric,
    height_um_sd numeric,
    measurement_method character varying(100),
    crystal_faces_measured character varying(200),
    he_ncc numeric,
    he_measurement_method character varying(100),
    he_extraction_temperature_c numeric,
    he_extraction_duration_min integer,
    he_extraction_method character varying(100),
    he_blank_ncc numeric,
    he_blank_error_ncc numeric,
    u_ppm numeric,
    u_ppm_error numeric,
    th_ppm numeric,
    th_ppm_error numeric,
    sm_ppm numeric,
    sm_ppm_error numeric,
    eu_ppm numeric,
    u_measurement_method character varying(100),
    u_blank_ppm numeric,
    th_blank_ppm numeric,
    sm_blank_ppm numeric,
    spike_u238_u235_ratio numeric,
    spike_th232_th229_ratio numeric,
    mass_mg numeric,
    surface_area_mm2 numeric,
    volume_mm3 numeric,
    sa_v_ratio numeric,
    rs_um numeric,
    esr_sa_v_um numeric,
    esr_ft_um numeric,
    sa_v_calc_equation character varying(100),
    ft_correction_equation character varying(100),
    alpha_stopping_distance_ref character varying(200),
    uncorr_age_ma numeric,
    uncorr_age_error_ma numeric,
    corr_age_ma numeric,
    corr_age_error_ma numeric,
    corr_age_1sigma_ma numeric,
    ft numeric,
    error_type character varying(20),
    eu_equation character varying(100),
    he_age_approach character varying(100),
    lambda_u238 character varying(30),
    lambda_th232 character varying(30),
    lambda_sm147 character varying(30),
    terminations character varying(10),
    std_run character varying(10),
    thermal_model character varying(10),
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE public.mounts (
    id integer NOT NULL,
    mount_id character varying(50) NOT NULL,
    mount_name character varying(200),
    mount_date date,
    sample_id character varying(50),
    etchant_chemical character varying(100),
    etch_duration_seconds integer,
    etch_temperature_c numeric,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE public.people (
    id integer NOT NULL,
    orcid character varying(50),
    name character varying(200) NOT NULL,
    email character varying(200),
    affiliation character varying(300),
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE public.reference_materials (
    id integer NOT NULL,
    batch_id integer NOT NULL,
    material_name character varying(100) NOT NULL,
    material_type character varying(50),
    expected_age_ma numeric,
    expected_age_error_ma numeric,
    measured_age_ma numeric,
    measured_age_error_ma numeric,
    parameter_type character varying(50),
    measured_value numeric,
    expected_value numeric,
    error numeric,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE public.sample_people_roles (
    id integer NOT NULL,
    sample_id character varying(50) NOT NULL,
    person_id integer NOT NULL,
    role character varying(50) NOT NULL,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE public.samples (
    sample_id character varying(50) NOT NULL,
    dataset_id integer DEFAULT 1,
    igsn character varying(20),
    latitude numeric,
    longitude numeric,
    elevation_m numeric,
    geodetic_datum character varying(20) DEFAULT 'WGS84'::character varying,
    vertical_datum character varying(50) DEFAULT 'mean sea level'::character varying,
    lat_long_precision_m integer,
    lithology character varying(100),
    mineral_type character varying(50),
    sample_kind character varying(100),
    sample_method character varying(100),
    sample_depth_m numeric,
    sampling_location_information text,
    stratigraphic_unit character varying(200),
    chronostratigraphic_unit_age character varying(100),
    sample_age_ma numeric,
    sample_collector character varying(200),
    collection_date date,
    analyst character varying(100),
    analysis_method character varying(100),
    last_known_sample_archive character varying(200),
    associated_references text,
    n_aft_grains integer,
    n_ahe_grains integer,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);
