-- Database Schema Snapshot
-- Generated: 2025-11-19 07:24:26
-- Database: neondb
-- Generated by: /bigtidy living documentation system

CREATE TABLE public.ahe_grain_data (
    id integer NOT NULL,
    sample_id character varying(50) NOT NULL,
    lab_no character varying(50),
    length_um numeric(10,2),
    half_width_um numeric(10,2),
    rs_um numeric(10,2),
    mass_mg numeric(10,6),
    terminations character varying(10),
    u_ppm numeric(10,3),
    th_ppm numeric(10,3),
    sm_ppm numeric(10,3),
    eu_ppm numeric(10,3),
    he_ncc numeric(12,6),
    uncorr_age_ma numeric(10,2),
    corr_age_ma numeric(10,2),
    corr_age_1sigma_ma numeric(10,2),
    ft numeric(6,4),
    std_run character varying(10),
    thermal_model character varying(10),
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE public.batches (
    id integer NOT NULL,
    batch_name character varying(200) NOT NULL,
    analysis_date date,
    laboratory character varying(200),
    analytical_session character varying(200),
    irradiation_id character varying(100),
    irradiation_reactor character varying(100),
    thermal_neutron_dose numeric(18,2),
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE public.data_files (
    id integer NOT NULL,
    dataset_id integer NOT NULL,
    file_name character varying(200) NOT NULL,
    file_path character varying(500) NOT NULL,
    file_type character varying(50) NOT NULL,
    display_name character varying(200),
    file_size_bytes integer,
    row_count integer,
    description text,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    is_folder boolean DEFAULT false,
    folder_path character varying(500),
    upload_status character varying(20) DEFAULT 'available'::character varying,
    category character varying(100),
    source_url text,
    upload_notes text
);

CREATE TABLE public.datapoint_people_roles (
    id integer NOT NULL,
    datapoint_id integer NOT NULL,
    datapoint_type character varying(20) NOT NULL,
    person_id integer NOT NULL,
    role character varying(50) NOT NULL,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT check_datapoint_type CHECK (((datapoint_type)::text = ANY ((ARRAY['ft'::character varying, 'he'::character varying, 'upb'::character varying, 'trace'::character varying])::text[])))
);

CREATE TABLE public.dataset_people_roles (
    id integer NOT NULL,
    dataset_id integer NOT NULL,
    person_id integer NOT NULL,
    role character varying(50) NOT NULL,
    author_order integer,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE public.datasets (
    id integer NOT NULL,
    dataset_name character varying(200) NOT NULL,
    description text,
    publication_reference text,
    doi character varying(100),
    study_area character varying(200),
    analyst character varying(100),
    laboratory character varying(200),
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    full_citation text,
    publication_year integer,
    publication_journal character varying(200),
    publication_volume_pages character varying(100),
    study_location text,
    pdf_filename character varying(500),
    pdf_url text,
    mineral_analyzed character varying(100),
    sample_count integer,
    age_range_min_ma numeric(10,2),
    age_range_max_ma numeric(10,2),
    authors text[],
    collection_date date,
    analysis_methods text[],
    supplementary_files_url text
);

CREATE TABLE public."earthbank_ftDatapoints" (
    id uuid DEFAULT public.uuid_generate_v4() NOT NULL,
    "datapointName" character varying(255) NOT NULL,
    "sampleID" character varying(255) NOT NULL,
    laboratory character varying(255),
    analyst character varying(255),
    "analysisDate" timestamp without time zone,
    "labNumber" character varying(100),
    "ftMethod" character varying(100),
    "mineralType" character varying(100),
    "nGrains" integer,
    "totalNs" integer,
    "rhoS" numeric(15,6),
    "uPpm" numeric(10,2),
    "uPpmStdDev" numeric(10,2),
    "uConcentration" numeric(10,2),
    "dPar" numeric(10,3),
    "dParUncertainty" numeric(10,3),
    "pChi2" numeric(10,2),
    dispersion numeric(10,4),
    "pooledAgeMa" numeric(10,2),
    "pooledAgeUncertainty" numeric(10,2),
    "centralAgeMa" numeric(10,2),
    "centralAgeUncertainty" numeric(10,2),
    mtl numeric(10,3),
    "mtlUncertainty" numeric(10,3),
    "stdDevMu" numeric(10,3),
    "nTracks" integer,
    "sigmaP" numeric(10,4),
    "sigmaPError" numeric(10,4),
    zeta numeric(12,4),
    "zetaUncertainty" numeric(12,4),
    "createdAt" timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    "updatedAt" timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE public."earthbank_ftTrackLengthData" (
    id uuid DEFAULT public.uuid_generate_v4() NOT NULL,
    "datapointName" character varying(255) NOT NULL,
    "sampleID" character varying(255),
    "grainName" character varying(100),
    "trackID" character varying(100),
    "trackType" character varying(100),
    "lengthUm" numeric(10,3),
    "cAxisAngleDeg" numeric(10,2),
    "dPar" numeric(10,3),
    "createdAt" timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE public."earthbank_heDatapoints" (
    id uuid DEFAULT public.uuid_generate_v4() NOT NULL,
    "datapointName" character varying(255) NOT NULL,
    "sampleID" character varying(255) NOT NULL,
    "ftMethod" character varying(100),
    laboratory character varying(255),
    analyst character varying(255),
    "analysisDate" timestamp without time zone,
    "nGrains" integer,
    "meanCorrectedAgeMa" numeric(10,2),
    "meanCorrectedAgeUncertainty" numeric(10,2),
    "meanUncorrectedAgeMa" numeric(10,2),
    notes text,
    "createdAt" timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    "updatedAt" timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE public."earthbank_heWholeGrainData" (
    id uuid DEFAULT public.uuid_generate_v4() NOT NULL,
    "datapointName" character varying(255) NOT NULL,
    "sampleID" character varying(255),
    "grainName" character varying(100) NOT NULL,
    "correctedHeAge" numeric(10,2),
    "correctedHeAgeUncertainty" numeric(10,2),
    "uncorrectedHeAge" numeric(10,2),
    "uncorrectedHeAgeUncertainty" numeric(10,2),
    ft numeric(10,4),
    "ftU238" numeric(10,4),
    "ftU235" numeric(10,4),
    "ftTh232" numeric(10,4),
    "ftSm147" numeric(10,4),
    "he4Concentration" numeric(15,6),
    "he4ConcentrationUncertainty" numeric(15,6),
    "heNmolG" numeric(15,6),
    "heNmolGUncertainty" numeric(15,6),
    "uConcentration" numeric(10,2),
    "uConcentrationUncertainty" numeric(10,2),
    "uNg" numeric(15,6),
    "uNgUncertainty" numeric(15,6),
    "thConcentration" numeric(10,2),
    "thConcentrationUncertainty" numeric(10,2),
    "thNg" numeric(15,6),
    "thNgUncertainty" numeric(15,6),
    "smConcentration" numeric(10,2),
    "smConcentrationUncertainty" numeric(10,2),
    "smNg" numeric(15,6),
    "smNgUncertainty" numeric(15,6),
    "eU" numeric(10,2),
    "eUUncertainty" numeric(10,2),
    "rsUm" numeric(12,3),
    "massMg" numeric(12,6),
    geometry character varying(100),
    "lengthUm" numeric(12,3),
    "widthUm" numeric(12,3),
    "numPits" integer,
    "createdAt" timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE public.earthbank_samples (
    id uuid DEFAULT public.uuid_generate_v4() NOT NULL,
    "sampleID" character varying(255) NOT NULL,
    "IGSN" character varying(20),
    latitude numeric(10,6),
    longitude numeric(10,6),
    "elevationM" numeric(10,2),
    "geodeticDatum" character varying(50),
    "verticalDatum" character varying(50),
    mineral character varying(100),
    "mineralType" character varying(100),
    lithology character varying(100),
    "sampleKind" character varying(100),
    "sampleAgeMa" numeric(10,2),
    collector character varying(255),
    "collectionDate" date,
    "collectionYear" integer,
    "datasetID" character varying(100),
    "nAFTGrains" integer,
    "nAHeGrains" integer,
    quadrangle character varying(255),
    "faultBlock" character varying(100),
    "igneousAgeMa" numeric(10,2),
    "igneousAgeErrorMa" numeric(10,2),
    project character varying(255),
    country character varying(100),
    "stateProvince" character varying(100),
    "locationDescription" text,
    "createdAt" timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    "updatedAt" timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE public.fair_score_breakdown (
    id integer NOT NULL,
    dataset_id integer NOT NULL,
    table4_score integer,
    table4_reasoning text,
    table5_score integer,
    table5_reasoning text,
    table6_score integer,
    table6_reasoning text,
    table10_score integer,
    table10_reasoning text,
    findable_score integer,
    findable_reasoning text,
    accessible_score integer,
    accessible_reasoning text,
    interoperable_score integer,
    interoperable_reasoning text,
    reusable_score integer,
    reusable_reasoning text,
    total_score integer,
    grade character varying(2),
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT check_total_matches_sum CHECK ((total_score = (((findable_score + accessible_score) + interoperable_score) + reusable_score))),
    CONSTRAINT fair_score_breakdown_accessible_score_check CHECK (((accessible_score >= 0) AND (accessible_score <= 25))),
    CONSTRAINT fair_score_breakdown_findable_score_check CHECK (((findable_score >= 0) AND (findable_score <= 25))),
    CONSTRAINT fair_score_breakdown_interoperable_score_check CHECK (((interoperable_score >= 0) AND (interoperable_score <= 25))),
    CONSTRAINT fair_score_breakdown_reusable_score_check CHECK (((reusable_score >= 0) AND (reusable_score <= 25))),
    CONSTRAINT fair_score_breakdown_table10_score_check CHECK (((table10_score >= 0) AND (table10_score <= 10))),
    CONSTRAINT fair_score_breakdown_table4_score_check CHECK (((table4_score >= 0) AND (table4_score <= 15))),
    CONSTRAINT fair_score_breakdown_table5_score_check CHECK (((table5_score >= 0) AND (table5_score <= 15))),
    CONSTRAINT fair_score_breakdown_table6_score_check CHECK (((table6_score >= 0) AND (table6_score <= 10))),
    CONSTRAINT fair_score_breakdown_total_score_check CHECK (((total_score >= 0) AND (total_score <= 100)))
);

CREATE TABLE public.ft_binned_length_data (
    id integer NOT NULL,
    ft_datapoint_id integer NOT NULL,
    mount_id character varying(50),
    etch_duration_seconds integer,
    bin_0_1_um integer,
    bin_1_2_um integer,
    bin_2_3_um integer,
    bin_3_4_um integer,
    bin_4_5_um integer,
    bin_5_6_um integer,
    bin_6_7_um integer,
    bin_7_8_um integer,
    bin_8_9_um integer,
    bin_9_10_um integer,
    bin_10_11_um integer,
    bin_11_12_um integer,
    bin_12_13_um integer,
    bin_13_14_um integer,
    bin_14_15_um integer,
    bin_15_16_um integer,
    bin_16_17_um integer,
    bin_17_18_um integer,
    bin_18_19_um integer,
    bin_19_20_um integer,
    dpar_um numeric(6,3),
    dpar_error_um numeric(6,3),
    n_dpar_measurements integer,
    dper_um numeric(6,3),
    dper_error_um numeric(6,3),
    n_dper_measurements integer,
    dpar_dper_error_type character varying(20),
    comments text,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE public.ft_count_data (
    id integer NOT NULL,
    ft_datapoint_id integer NOT NULL,
    grain_id character varying(100) NOT NULL,
    counting_area_cm2 numeric(10,6),
    ns integer,
    rho_s_cm2 numeric(12,2),
    ni integer,
    rho_i_cm2 numeric(12,2),
    nd integer,
    rho_d_cm2 numeric(12,2),
    dpar_um numeric(6,3),
    dpar_error_um numeric(6,3),
    n_dpar_measurements integer,
    dper_um numeric(6,3),
    dper_error_um numeric(6,3),
    n_dper_measurements integer,
    dpar_dper_error_type character varying(20),
    comments text,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE public.ft_datapoints (
    id integer NOT NULL,
    sample_id character varying(50) NOT NULL,
    datapoint_key character varying(100) NOT NULL,
    batch_id integer,
    laboratory character varying(200),
    analyst_orcid character varying(50),
    analysis_date timestamp without time zone,
    publication_doi character varying(100),
    mineral_type character varying(50),
    ft_method character varying(50),
    ft_software character varying(100),
    ft_algorithm character varying(50),
    u_determination_method character varying(100),
    n_grains integer,
    total_area_cm2 numeric(10,6),
    mean_rho_s numeric(12,2),
    total_ns integer,
    mean_rho_i numeric(12,2),
    total_ni integer,
    mean_rho_d numeric(12,2),
    total_nd integer,
    dosimeter character varying(50),
    mean_u_ppm numeric(10,3),
    sd_u_ppm numeric(10,3),
    mean_dpar_um numeric(6,3),
    se_dpar_um numeric(6,3),
    n_dpar_measurements integer,
    mean_dper_um numeric(6,3),
    se_dper_um numeric(6,3),
    n_dper_measurements integer,
    mean_rmr0 numeric(6,4),
    sd_rmr0 numeric(6,4),
    mean_kappa numeric(6,4),
    sd_kappa numeric(6,4),
    rmr0_equation character varying(100),
    chi_square numeric(12,6),
    p_chi2_pct numeric(6,3),
    dispersion_pct numeric(6,4),
    age_equation character varying(100),
    mean_age_ma numeric(10,2),
    mean_age_error_ma numeric(10,2),
    central_age_ma numeric(10,2),
    central_age_error_ma numeric(10,2),
    pooled_age_ma numeric(10,2),
    pooled_age_error_ma numeric(10,2),
    population_age_ma numeric(10,2),
    population_age_error_ma numeric(10,2),
    age_error_type character varying(20),
    age_comment text,
    mean_track_length_um numeric(6,3),
    se_mean_track_length_um numeric(6,3),
    n_track_measurements integer,
    sd_track_length_um numeric(6,3),
    cf252_irradiation boolean,
    etchant_chemical character varying(100),
    etch_duration_seconds integer,
    etch_temperature_c numeric(5,2),
    zeta_yr_cm2 numeric(12,6),
    zeta_error_yr_cm2 numeric(12,6),
    zeta_error_type character varying(20),
    r_um numeric(8,3),
    lambda_d character varying(30),
    lambda_f character varying(30),
    q_factor numeric(6,4),
    irradiation_reactor character varying(100),
    thermal_neutron_dose numeric(18,2),
    irradiation_batch_id character varying(100),
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE public.ft_single_grain_ages (
    id integer NOT NULL,
    ft_datapoint_id integer NOT NULL,
    grain_id character varying(100) NOT NULL,
    mount_id character varying(50),
    etch_duration_seconds integer,
    u_ppm numeric(10,3),
    u_ppm_error numeric(10,3),
    u_ca_ratio numeric(10,6),
    u_ca_ratio_error numeric(10,6),
    u_ca_error_type character varying(20),
    rmr0 numeric(6,4),
    kappa numeric(6,4),
    grain_age_ma numeric(10,2),
    grain_age_error_ma numeric(10,2),
    grain_age_error_type character varying(20),
    comments text,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE public.ft_track_length_data (
    id integer NOT NULL,
    ft_datapoint_id integer NOT NULL,
    grain_id character varying(100) NOT NULL,
    track_id character varying(100) NOT NULL,
    track_type character varying(20),
    mount_id character varying(50),
    etch_duration_seconds integer,
    apparent_length_um numeric(6,3),
    corrected_z_depth_um numeric(8,2),
    true_length_um numeric(6,3),
    azimuth_deg numeric(6,2),
    dip_deg numeric(6,2),
    angle_to_c_axis_deg numeric(6,2),
    c_axis_corrected_length_um numeric(6,3),
    dpar_um numeric(6,3),
    dpar_error_um numeric(6,3),
    n_dpar_measurements integer,
    dper_um numeric(6,3),
    dper_error_um numeric(6,3),
    n_dper_measurements integer,
    dpar_dper_error_type character varying(20),
    rmr0 numeric(6,4),
    kappa numeric(6,4),
    comments text,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT check_track_type CHECK (((track_type)::text = ANY ((ARRAY['TINT'::character varying, 'TINCLE'::character varying, 'semi-track'::character varying, NULL::character varying])::text[])))
);

CREATE TABLE public.grains (
    id integer NOT NULL,
    grain_id character varying(100) NOT NULL,
    mount_id character varying(50),
    grain_identifier character varying(100),
    grain_morphology character varying(50),
    grain_quality character varying(50),
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE public.he_datapoints (
    id integer NOT NULL,
    sample_id character varying(50) NOT NULL,
    datapoint_key character varying(100) NOT NULL,
    batch_id integer,
    laboratory character varying(200),
    analyst_orcid character varying(50),
    analysis_date timestamp without time zone,
    publication_doi character varying(100),
    mineral_type character varying(50),
    mount_id character varying(50),
    n_aliquots integer,
    mean_uncorr_age_ma numeric(10,2),
    mean_uncorr_age_error_ma numeric(10,2),
    mean_uncorr_age_error_type character varying(20),
    weighted_mean_uncorr_age_ma numeric(10,2),
    weighted_mean_uncorr_age_error_ma numeric(10,2),
    weighted_mean_uncorr_age_error_type character varying(20),
    mswd_uncorr numeric(8,4),
    conf95_uncorr_ma numeric(10,2),
    chi2_uncorr_pct numeric(6,3),
    iqr_uncorr_ma numeric(10,2),
    mean_corr_age_ma numeric(10,2),
    mean_corr_age_error_ma numeric(10,2),
    mean_corr_age_error_type character varying(20),
    weighted_mean_corr_age_ma numeric(10,2),
    weighted_mean_corr_age_error_ma numeric(10,2),
    weighted_mean_corr_age_error_type character varying(20),
    mswd_corr numeric(8,4),
    conf95_corr_ma numeric(10,2),
    chi2_corr_pct numeric(6,3),
    iqr_corr_ma numeric(10,2),
    uncertainty_description text,
    ablation_pit_volume_method character varying(100),
    ablation_pit_volume_software character varying(100),
    he_measurement_method character varying(100),
    parent_isotope_method character varying(100),
    surface_area_volume_equation character varying(100),
    alpha_stopping_distance_ref character varying(200),
    ft_correction_equation character varying(100),
    esr_sa_v_equation character varying(100),
    esr_ft_equation character varying(100),
    eu_equation character varying(100),
    he_age_approach character varying(100),
    corr_age_method character varying(100),
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE public.he_whole_grain_data (
    id integer NOT NULL,
    he_datapoint_id integer NOT NULL,
    lab_no character varying(50),
    grain_identifier character varying(100),
    aliquot_type character varying(20),
    n_grains_in_aliquot integer,
    crystal_integrity character varying(20),
    grain_morphology character varying(50),
    assumed_geometry character varying(50),
    length_um numeric(10,2),
    length_um_sd numeric(10,2),
    half_width_um numeric(10,2),
    width_um_sd numeric(10,2),
    height_um numeric(10,2),
    height_um_sd numeric(10,2),
    measurement_method character varying(100),
    crystal_faces_measured character varying(200),
    he_ncc numeric(12,6),
    he_measurement_method character varying(100),
    he_extraction_temperature_c numeric(6,2),
    he_extraction_duration_min integer,
    he_extraction_method character varying(100),
    he_blank_ncc numeric(12,6),
    he_blank_error_ncc numeric(12,6),
    u_ppm numeric(10,3),
    u_ppm_error numeric(10,3),
    th_ppm numeric(10,3),
    th_ppm_error numeric(10,3),
    sm_ppm numeric(10,3),
    sm_ppm_error numeric(10,3),
    eu_ppm numeric(10,3),
    u_measurement_method character varying(100),
    u_blank_ppm numeric(10,6),
    th_blank_ppm numeric(10,6),
    sm_blank_ppm numeric(10,6),
    spike_u238_u235_ratio numeric(10,6),
    spike_th232_th229_ratio numeric(10,6),
    mass_mg numeric(10,6),
    surface_area_mm2 numeric(10,6),
    volume_mm3 numeric(10,6),
    sa_v_ratio numeric(10,6),
    rs_um numeric(10,2),
    esr_sa_v_um numeric(10,2),
    esr_ft_um numeric(10,2),
    sa_v_calc_equation character varying(100),
    ft_correction_equation character varying(100),
    alpha_stopping_distance_ref character varying(200),
    uncorr_age_ma numeric(10,2),
    uncorr_age_error_ma numeric(10,2),
    corr_age_ma numeric(10,2),
    corr_age_error_ma numeric(10,2),
    corr_age_1sigma_ma numeric(10,2),
    ft numeric(6,4),
    error_type character varying(20),
    eu_equation character varying(100),
    he_age_approach character varying(100),
    lambda_u238 character varying(30),
    lambda_th232 character varying(30),
    lambda_sm147 character varying(30),
    terminations character varying(10),
    std_run character varying(10),
    thermal_model character varying(10),
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE public.mounts (
    id integer NOT NULL,
    mount_id character varying(50) NOT NULL,
    mount_name character varying(200),
    mount_date date,
    sample_id character varying(50),
    etchant_chemical character varying(100),
    etch_duration_seconds integer,
    etch_temperature_c numeric(5,2),
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE public.people (
    id integer NOT NULL,
    orcid character varying(50),
    name character varying(200) NOT NULL,
    email character varying(200),
    affiliation character varying(300),
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT check_orcid_or_name CHECK (((orcid IS NOT NULL) OR (name IS NOT NULL)))
);

CREATE TABLE public.reference_materials (
    id integer NOT NULL,
    batch_id integer NOT NULL,
    material_name character varying(100) NOT NULL,
    material_type character varying(50),
    expected_age_ma numeric(10,2),
    expected_age_error_ma numeric(10,2),
    measured_age_ma numeric(10,2),
    measured_age_error_ma numeric(10,2),
    parameter_type character varying(50),
    measured_value numeric(15,6),
    expected_value numeric(15,6),
    error numeric(15,6),
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE public.sample_people_roles (
    id integer NOT NULL,
    sample_id character varying(50) NOT NULL,
    person_id integer NOT NULL,
    role character varying(50) NOT NULL,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE public.samples (
    sample_id character varying(50) NOT NULL,
    dataset_id integer DEFAULT 1,
    igsn character varying(20),
    latitude numeric(10,7),
    longitude numeric(10,7),
    elevation_m numeric(8,2),
    geodetic_datum character varying(20) DEFAULT 'WGS84'::character varying,
    vertical_datum character varying(50) DEFAULT 'mean sea level'::character varying,
    lat_long_precision_m integer,
    lithology character varying(100),
    mineral_type character varying(50),
    sample_kind character varying(100),
    sample_method character varying(100),
    sample_depth_m numeric(8,2),
    sampling_location_information text,
    stratigraphic_unit character varying(200),
    chronostratigraphic_unit_age character varying(100),
    sample_age_ma numeric(10,2),
    sample_collector character varying(200),
    collection_date date,
    analyst character varying(100),
    analysis_method character varying(100),
    last_known_sample_archive character varying(200),
    associated_references text,
    n_aft_grains integer,
    n_ahe_grains integer,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);

-- Primary Keys
ALTER TABLE ONLY public.ahe_grain_data
    ADD CONSTRAINT ahe_grain_data_pkey PRIMARY KEY (id);

ALTER TABLE ONLY public.batches
    ADD CONSTRAINT batches_pkey PRIMARY KEY (id);

ALTER TABLE ONLY public.data_files
    ADD CONSTRAINT data_files_pkey PRIMARY KEY (id);

ALTER TABLE ONLY public.datapoint_people_roles
    ADD CONSTRAINT datapoint_people_roles_pkey PRIMARY KEY (id);

ALTER TABLE ONLY public.dataset_people_roles
    ADD CONSTRAINT dataset_people_roles_pkey PRIMARY KEY (id);

ALTER TABLE ONLY public.datasets
    ADD CONSTRAINT datasets_pkey PRIMARY KEY (id);

ALTER TABLE ONLY public."earthbank_ftDatapoints"
    ADD CONSTRAINT "earthbank_ftDatapoints_pkey" PRIMARY KEY (id);

ALTER TABLE ONLY public."earthbank_ftTrackLengthData"
    ADD CONSTRAINT "earthbank_ftTrackLengthData_pkey" PRIMARY KEY (id);

ALTER TABLE ONLY public."earthbank_heDatapoints"
    ADD CONSTRAINT "earthbank_heDatapoints_pkey" PRIMARY KEY (id);

ALTER TABLE ONLY public."earthbank_heWholeGrainData"
    ADD CONSTRAINT "earthbank_heWholeGrainData_pkey" PRIMARY KEY (id);

ALTER TABLE ONLY public.earthbank_samples
    ADD CONSTRAINT earthbank_samples_pkey PRIMARY KEY (id);

ALTER TABLE ONLY public.fair_score_breakdown
    ADD CONSTRAINT fair_score_breakdown_pkey PRIMARY KEY (id);

ALTER TABLE ONLY public.ft_binned_length_data
    ADD CONSTRAINT ft_binned_length_data_pkey PRIMARY KEY (id);

ALTER TABLE ONLY public.ft_count_data
    ADD CONSTRAINT ft_count_data_pkey PRIMARY KEY (id);

ALTER TABLE ONLY public.ft_datapoints
    ADD CONSTRAINT ft_datapoints_pkey PRIMARY KEY (id);

ALTER TABLE ONLY public.ft_single_grain_ages
    ADD CONSTRAINT ft_single_grain_ages_pkey PRIMARY KEY (id);

ALTER TABLE ONLY public.ft_track_length_data
    ADD CONSTRAINT ft_track_length_data_pkey PRIMARY KEY (id);

ALTER TABLE ONLY public.grains
    ADD CONSTRAINT grains_pkey PRIMARY KEY (id);

ALTER TABLE ONLY public.he_datapoints
    ADD CONSTRAINT he_datapoints_pkey PRIMARY KEY (id);

ALTER TABLE ONLY public.he_whole_grain_data
    ADD CONSTRAINT he_whole_grain_data_pkey PRIMARY KEY (id);

ALTER TABLE ONLY public.mounts
    ADD CONSTRAINT mounts_pkey PRIMARY KEY (id);

ALTER TABLE ONLY public.people
    ADD CONSTRAINT people_pkey PRIMARY KEY (id);

ALTER TABLE ONLY public.reference_materials
    ADD CONSTRAINT reference_materials_pkey PRIMARY KEY (id);

ALTER TABLE ONLY public.sample_people_roles
    ADD CONSTRAINT sample_people_roles_pkey PRIMARY KEY (id);

ALTER TABLE ONLY public.samples
    ADD CONSTRAINT samples_pkey PRIMARY KEY (sample_id);

-- Foreign Keys
ALTER TABLE ONLY public.ahe_grain_data
    ADD CONSTRAINT ahe_grain_data_sample_id_fkey FOREIGN KEY (sample_id) REFERENCES public.samples(sample_id) ON DELETE CASCADE;

ALTER TABLE ONLY public.data_files
    ADD CONSTRAINT data_files_dataset_id_fkey FOREIGN KEY (dataset_id) REFERENCES public.datasets(id) ON DELETE CASCADE;

ALTER TABLE ONLY public.datapoint_people_roles
    ADD CONSTRAINT datapoint_people_roles_person_id_fkey FOREIGN KEY (person_id) REFERENCES public.people(id) ON DELETE CASCADE;

ALTER TABLE ONLY public."earthbank_ftDatapoints"
    ADD CONSTRAINT "earthbank_ftDatapoints_sampleID_fkey" FOREIGN KEY ("sampleID") REFERENCES public.earthbank_samples("sampleID") ON DELETE CASCADE;

ALTER TABLE ONLY public."earthbank_ftTrackLengthData"
    ADD CONSTRAINT "earthbank_ftTrackLengthData_datapointName_fkey" FOREIGN KEY ("datapointName") REFERENCES public."earthbank_ftDatapoints"("datapointName") ON DELETE CASCADE;

ALTER TABLE ONLY public."earthbank_heDatapoints"
    ADD CONSTRAINT "earthbank_heDatapoints_sampleID_fkey" FOREIGN KEY ("sampleID") REFERENCES public.earthbank_samples("sampleID") ON DELETE CASCADE;

ALTER TABLE ONLY public."earthbank_heWholeGrainData"
    ADD CONSTRAINT "earthbank_heWholeGrainData_datapointName_fkey" FOREIGN KEY ("datapointName") REFERENCES public."earthbank_heDatapoints"("datapointName") ON DELETE CASCADE;

ALTER TABLE ONLY public.fair_score_breakdown
    ADD CONSTRAINT fair_score_breakdown_dataset_id_fkey FOREIGN KEY (dataset_id) REFERENCES public.datasets(id) ON DELETE CASCADE;

ALTER TABLE ONLY public.dataset_people_roles
    ADD CONSTRAINT fk_dataset_people_dataset FOREIGN KEY (dataset_id) REFERENCES public.datasets(id) ON DELETE CASCADE;

ALTER TABLE ONLY public.dataset_people_roles
    ADD CONSTRAINT fk_dataset_people_person FOREIGN KEY (person_id) REFERENCES public.people(id) ON DELETE CASCADE;

ALTER TABLE ONLY public.ft_binned_length_data
    ADD CONSTRAINT ft_binned_length_data_ft_datapoint_id_fkey FOREIGN KEY (ft_datapoint_id) REFERENCES public.ft_datapoints(id) ON DELETE CASCADE;

ALTER TABLE ONLY public.ft_count_data
    ADD CONSTRAINT ft_count_data_ft_datapoint_id_fkey FOREIGN KEY (ft_datapoint_id) REFERENCES public.ft_datapoints(id) ON DELETE CASCADE;

ALTER TABLE ONLY public.ft_datapoints
    ADD CONSTRAINT ft_datapoints_batch_id_fkey FOREIGN KEY (batch_id) REFERENCES public.batches(id);

ALTER TABLE ONLY public.ft_single_grain_ages
    ADD CONSTRAINT ft_single_grain_ages_ft_datapoint_id_fkey FOREIGN KEY (ft_datapoint_id) REFERENCES public.ft_datapoints(id) ON DELETE CASCADE;

ALTER TABLE ONLY public.ft_track_length_data
    ADD CONSTRAINT ft_track_length_data_ft_datapoint_id_fkey FOREIGN KEY (ft_datapoint_id) REFERENCES public.ft_datapoints(id) ON DELETE CASCADE;

ALTER TABLE ONLY public.grains
    ADD CONSTRAINT grains_mount_id_fkey FOREIGN KEY (mount_id) REFERENCES public.mounts(mount_id) ON DELETE SET NULL;

ALTER TABLE ONLY public.he_datapoints
    ADD CONSTRAINT he_datapoints_batch_id_fkey FOREIGN KEY (batch_id) REFERENCES public.batches(id);

ALTER TABLE ONLY public.he_whole_grain_data
    ADD CONSTRAINT he_whole_grain_data_he_datapoint_id_fkey FOREIGN KEY (he_datapoint_id) REFERENCES public.he_datapoints(id) ON DELETE CASCADE;

ALTER TABLE ONLY public.reference_materials
    ADD CONSTRAINT reference_materials_batch_id_fkey FOREIGN KEY (batch_id) REFERENCES public.batches(id) ON DELETE CASCADE;

ALTER TABLE ONLY public.sample_people_roles
    ADD CONSTRAINT sample_people_roles_person_id_fkey FOREIGN KEY (person_id) REFERENCES public.people(id) ON DELETE CASCADE;

ALTER TABLE ONLY public.samples
    ADD CONSTRAINT samples_dataset_id_fkey FOREIGN KEY (dataset_id) REFERENCES public.datasets(id);

